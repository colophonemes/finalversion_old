.container(ng-controller="TasksCtrl")
	.row
		.col-md-12
			h1.pagetitle Tasks
			ul.tasks
				li.task( ng-repeat="task in tasks",
					ng-class="{active: hover, selected: selected}",
					ng-mouseenter="hover = true",
					ng-mouseleave="hover = false",
					ng-init="selected = task.selected"
					)
					a.set-selected(ng-click="selected=!selected; setTaskAsSelected(task._id,selected)")
						span.fa.fa-arrow-circle-right(ng-show="selected") 
						|  {{task.name}}
						| - {{task.status}}
						|<span ng-if="task.recurring"> - Recurring ({{task.recurringInterval}})</span> 
					a.delete.pull-right(ng-click="destroyTask(task._id)")
						| Delete 
						span.fa.fa-trash
	.row
		.col-md-12
			h3
				| Add a new task:
			form(name="newTask",ng-model="newTask",ng-submit="newTaskSubmitted()")
				.form-horizontal
					.form-group
						label.sr-only(for="taskName") Add new task:
						input.form-control(type="text",name="taskName",ng-model="taskName", placeholder="Add new task" required)
				.form-inline
					.checkbox
						label(for="taskRecurring") Is this a recurring task? 
							input.form-control(type="checkbox",name='taskRecurring',ng-model="taskRecurring",checked=unchecked)
					.form-group(ng-show="taskRecurring")
						label Repeat every
							input.form-control(type="number", name="taskRecurringInterval", ng-model="taskRecurringInterval", value="5", ng-required="taskRecurring", min="1" ng-pattern="/^[1-9]*$/")
							| day
							span(ng-show="taskRecurringInterval>1") s
					button.btn(type="submit", ng-class="{'btn-success':newTask.$valid}", ng-disabled="newTask.$invalid") Submit
	.row
		.col-md-12
			ul
				li(ng-repeat="task in allTasks")
					|	{{task.name}} - {{task.status}}<span ng-if="task.recurring"> - Recurring ({{task.recurringInterval}})</span> 
					a(ng-click="destroyTask(task._id)")
						span.fa.fa-trash
